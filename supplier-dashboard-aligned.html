<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supplier Sustainability Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            padding: 20px;
        }

        .dashboard {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .header h1 {
            color: #0f5f4e;
            font-size: 28px;
            margin-bottom: 8px;
        }

        .header p {
            color: #666;
            font-size: 14px;
        }

        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .widget {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.2s;
        }

        .widget:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f0f0f0;
        }

        .widget-title-section {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }

        .widget-title {
            font-size: 18px;
            color: #0f5f4e;
            font-weight: 600;
        }

        .info-icon {
            width: 20px;
            height: 20px;
            background: #17a085;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            cursor: help;
            position: relative;
        }

        .info-icon:hover::after {
            content: attr(data-info);
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: normal;
            white-space: normal;
            width: 280px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            line-height: 1.4;
        }

        .info-icon:hover::before {
            content: '';
            position: absolute;
            bottom: 22px;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-top-color: #333;
            z-index: 1000;
        }

        .widget-icon {
            width: 32px;
            height: 32px;
            background: #0f5f4e;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            font-weight: 700;
        }

        .supplier-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .supplier-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f9fafb;
            border-radius: 8px;
            border-left: 4px solid;
        }

        .supplier-name {
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }

        .supplier-value {
            font-weight: 600;
            font-size: 14px;
        }

        .badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-high { background: #fee; color: #c00; }
        .badge-medium { background: #fff3cd; color: #856404; }
        .badge-low { background: #d4edda; color: #155724; }
        .badge-certified { background: #d1ecf1; color: #0c5460; }

        .chart-container {
            position: relative;
            height: 250px;
            margin-top: 15px;
        }

        .chart-clickable {
            cursor: pointer;
        }

        .chart-clickable canvas:hover {
            opacity: 0.9;
        }

        .click-hint {
            text-align: center;
            color: #17a085;
            font-size: 11px;
            margin-top: 8px;
            font-style: italic;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 15px;
        }

        .metric-card {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .metric-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .metric-value {
            font-size: 20px;
            font-weight: 700;
            color: #0f5f4e;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0f5f4e, #17a085);
            transition: width 0.3s;
        }

        .ranking-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: #f9fafb;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .rank-number {
            width: 30px;
            height: 30px;
            background: #0f5f4e;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
        }

        .rank-details {
            flex: 1;
        }

        .rank-name {
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        .rank-score {
            font-size: 12px;
            color: #666;
        }

        .trend-icon {
            font-size: 18px;
        }

        .trend-up { color: #c00; }
        .trend-down { color: #28a745; }
        .trend-stable { color: #ffc107; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        th {
            background: #f9fafb;
            font-weight: 600;
            color: #0f5f4e;
            font-size: 13px;
        }

        td {
            font-size: 13px;
            color: #333;
        }

        /* Modal Popup Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: #f5f7fa;
            margin: 2% auto;
            padding: 0;
            width: 95%;
            max-width: 1400px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            animation: slideDown 0.3s;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: white;
            padding: 25px;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #f0f0f0;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .modal-title-section h2 {
            color: #0f5f4e;
            font-size: 24px;
            margin: 0 0 5px 0;
        }

        .modal-title-section p {
            color: #666;
            font-size: 14px;
            margin: 0;
        }

        .close-button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .close-button:hover {
            background: #c82333;
        }

        .modal-body {
            padding: 20px;
        }

        .regions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .region-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .region-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f0f0f0;
        }

        .region-title {
            font-size: 18px;
            color: #0f5f4e;
            font-weight: 600;
        }

        .region-icon {
            font-size: 16px;
            font-weight: 700;
            color: #0f5f4e;
        }

        .region-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 15px;
        }

        .stat-box {
            background: #f9fafb;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-label {
            font-size: 11px;
            color: #666;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 16px;
            font-weight: 700;
            color: #0f5f4e;
        }

        .country-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .country-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f9fafb;
            border-radius: 8px;
            border-left: 4px solid #0f5f4e;
        }

        .country-name {
            font-weight: 500;
            color: #333;
            font-size: 13px;
        }

        .country-suppliers {
            font-weight: 600;
            color: #0f5f4e;
            font-size: 13px;
        }

        .risk-badge {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            margin-left: 8px;
        }

        .risk-low { background: #d4edda; color: #155724; }
        .risk-medium { background: #fff3cd; color: #856404; }
        .risk-high { background: #fee; color: #c00; }

        .modal-chart-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }

        .modal-chart-header {
            font-size: 18px;
            color: #0f5f4e;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f0f0f0;
        }

        .modal-chart-container {
            position: relative;
            height: 300px;
        }

        .insights-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .insights-header {
            font-size: 18px;
            color: #0f5f4e;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .insight-item {
            display: flex;
            gap: 12px;
            padding: 12px;
            background: #f9fafb;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid;
        }

        .insight-icon {
            font-size: 18px;
            font-weight: 700;
            flex-shrink: 0;
            color: #0f5f4e;
        }

        .insight-content {
            flex: 1;
        }

        .insight-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .insight-text {
            color: #666;
            font-size: 12px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>Supplier Sustainability Dashboard</h1>
            <p>Comprehensive overview of supplier environmental performance metrics</p>
        </div>

        <div class="widgets-grid">
            <!-- Widget 1: High-Risk Suppliers -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title-section">
                        <h3 class="widget-title">High-Risk Suppliers</h3>
                        <div class="info-icon" data-info="Suppliers flagged for environmental compliance issues, high emissions, or lack of sustainability certifications. Requires immediate attention and remediation plans.">ⓘ</div>
                    </div>
                    <div class="widget-icon">!</div>
                </div>
                <div class="supplier-list">
                    <div class="supplier-item" style="border-left-color: #dc3545;">
                        <div>
                            <div class="supplier-name">Atlas Manufacturing</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">High emissions | No certification</div>
                        </div>
                        <span class="badge badge-high">Critical</span>
                    </div>
                    <div class="supplier-item" style="border-left-color: #ffc107;">
                        <div>
                            <div class="supplier-name">Velocity Logistics</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Compliance issues | Audit pending</div>
                        </div>
                        <span class="badge badge-medium">Review</span>
                    </div>
                    <div class="supplier-item" style="border-left-color: #fd7e14;">
                        <div>
                            <div class="supplier-name">Phoenix Textiles</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Water usage concerns | Action plan due</div>
                        </div>
                        <span class="badge badge-medium">Monitor</span>
                    </div>
                </div>
            </div>

            <!-- Widget 2: Top Performing Suppliers -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title-section">
                        <h3 class="widget-title">Top Performing Suppliers</h3>
                        <div class="info-icon" data-info="Suppliers ranked by overall sustainability score based on carbon emissions, renewable energy usage, waste management, and certifications. Top performers serve as benchmarks.">ⓘ</div>
                    </div>
                    <div class="widget-icon">★</div>
                </div>
                <div class="supplier-list">
                    <div class="ranking-item">
                        <div class="rank-number">1</div>
                        <div class="rank-details">
                            <div class="rank-name">GreenTech Solutions</div>
                            <div class="rank-score">Sustainability Score: 94/100</div>
                        </div>
                        <span class="trend-icon trend-down">↓</span>
                    </div>
                    <div class="ranking-item">
                        <div class="rank-number">2</div>
                        <div class="rank-details">
                            <div class="rank-name">Sustainable Resources Co</div>
                            <div class="rank-score">Sustainability Score: 88/100</div>
                        </div>
                        <span class="trend-icon trend-up">↑</span>
                    </div>
                    <div class="ranking-item">
                        <div class="rank-number">3</div>
                        <div class="rank-details">
                            <div class="rank-name">EcoMaterials Global</div>
                            <div class="rank-score">Sustainability Score: 82/100</div>
                        </div>
                        <span class="trend-icon trend-stable">→</span>
                    </div>
                </div>
            </div>

            <!-- Widget 3: Certification Status -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title-section">
                        <h3 class="widget-title">Certification Status Distribution</h3>
                        <div class="info-icon" data-info="Breakdown of environmental certifications across supplier base. Shows proportion with ISO 14001, Carbon Neutral status, no certification, or in-progress certification efforts.">ⓘ</div>
                    </div>
                    <div class="widget-icon">C</div>
                </div>
                <div class="chart-container">
                    <canvas id="certificationChart"></canvas>
                </div>
            </div>

            <!-- Widget 4: Geographic Distribution (INTERACTIVE) -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title-section">
                        <h3 class="widget-title">Geographic Distribution</h3>
                        <div class="info-icon" data-info="Number of suppliers by region. Click on the chart to view detailed regional breakdown including country-level data and regional risk profiles.">ⓘ</div>
                    </div>
                    <div class="widget-icon">G</div>
                </div>
                <div class="chart-container chart-clickable" id="geoChartContainer">
                    <canvas id="geoChart"></canvas>
                </div>
                <div class="click-hint">Click chart to view detailed popup</div>
            </div>

            <!-- Widget 5: Renewable Energy Usage -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title-section">
                        <h3 class="widget-title">Renewable Energy Adoption</h3>
                        <div class="info-icon" data-info="Percentage of operations powered by renewable energy sources for top 5 suppliers. Measures progress toward clean energy transition and carbon reduction goals.">ⓘ</div>
                    </div>
                    <div class="widget-icon">E</div>
                </div>
                <div class="chart-container">
                    <canvas id="renewableChart"></canvas>
                </div>
            </div>

            <!-- Widget 6: Carbon Footprint Trends -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title-section">
                        <h3 class="widget-title">Carbon Footprint Trend Analysis</h3>
                        <div class="info-icon" data-info="Monthly carbon emissions trends showing increase, decrease, or stability. Red arrows indicate emissions growth requiring intervention; green arrows show successful reduction efforts.">ⓘ</div>
                    </div>
                    <div class="widget-icon">T</div>
                </div>
                <div class="supplier-list">
                    <div class="supplier-item" style="border-left-color: #dc3545;">
                        <div>
                            <div class="supplier-name">Nexus Freight Group</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">+12% vs last quarter</div>
                        </div>
                        <span class="trend-icon trend-up">↑</span>
                    </div>
                    <div class="supplier-item" style="border-left-color: #28a745;">
                        <div>
                            <div class="supplier-name">GreenTech Solutions</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">-8% vs last quarter</div>
                        </div>
                        <span class="trend-icon trend-down">↓</span>
                    </div>
                    <div class="supplier-item" style="border-left-color: #ffc107;">
                        <div>
                            <div class="supplier-name">Global Trade Alliance</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">±1% vs last quarter</div>
                        </div>
                        <span class="trend-icon trend-stable">→</span>
                    </div>
                </div>
            </div>

            <!-- Widget 7: Key Metrics -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title-section">
                        <h3 class="widget-title">Key Performance Indicators</h3>
                        <div class="info-icon" data-info="Core sustainability metrics aggregated across supplier network: total suppliers tracked, average sustainability score, certified suppliers percentage, and improvement rate year-over-year.">ⓘ</div>
                    </div>
                    <div class="widget-icon">M</div>
                </div>
                <div class="metric-grid">
                    <div class="metric-card">
                        <div class="metric-label">Total Suppliers</div>
                        <div class="metric-value">30</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Avg. Sustainability Score</div>
                        <div class="metric-value">76/100</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Certified Suppliers</div>
                        <div class="metric-value">60%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">YoY Improvement</div>
                        <div class="metric-value">+14%</div>
                    </div>
                </div>
            </div>

            <!-- Widget 8: Compliance & Audit Status -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title-section">
                        <h3 class="widget-title">Compliance & Audit Status</h3>
                        <div class="info-icon" data-info="Current audit status for key suppliers showing last audit date, next scheduled audit, and compliance status. Action Required indicates failed audits or overdue corrective actions.">ⓘ</div>
                    </div>
                    <div class="widget-icon">A</div>
                </div>
                <div class="supplier-list">
                    <div class="supplier-item" style="border-left-color: #28a745;">
                        <div>
                            <div class="supplier-name">GreenTech Solutions</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Last audit: Oct 15, 2025 | Next: Jan 15, 2026</div>
                        </div>
                        <span class="badge badge-certified">Compliant</span>
                    </div>
                    <div class="supplier-item" style="border-left-color: #ffc107;">
                        <div>
                            <div class="supplier-name">EcoMaterials Global</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Last audit: Sep 28, 2025 | Next: Dec 28, 2025</div>
                        </div>
                        <span class="badge badge-medium">Action Required</span>
                    </div>
                    <div class="supplier-item" style="border-left-color: #28a745;">
                        <div>
                            <div class="supplier-name">Sustainable Resources Co</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Last audit: Oct 5, 2025 | Next: Jan 5, 2026</div>
                        </div>
                        <span class="badge badge-certified">Passed</span>
                    </div>
                    <div class="supplier-item" style="border-left-color: #17a2b8;">
                        <div>
                            <div class="supplier-name">Nexus Freight Group</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Last audit: Aug 20, 2025 | Next: Nov 20, 2025</div>
                        </div>
                        <span class="badge badge-medium">Scheduled</span>
                    </div>
                </div>
            </div>

            <!-- Widget 9: Cost vs Emissions Analysis -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title-section">
                        <h3 class="widget-title">Cost vs Emissions Efficiency</h3>
                        <div class="info-icon" data-info="Scatter plot showing relationship between annual supplier costs and carbon emissions. Identifies suppliers with optimal cost-efficiency and those requiring emission reduction investments.">ⓘ</div>
                    </div>
                    <div class="widget-icon">$</div>
                </div>
                <div class="chart-container">
                    <canvas id="costEmissionsChart"></canvas>
                </div>
            </div>

            <!-- Widget 10: Supplier Reduction Targets -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title-section">
                        <h3 class="widget-title">Supplier Reduction Targets (2025)</h3>
                        <div class="info-icon" data-info="Progress toward 2025 emission reduction targets for each supplier. Progress bars show percentage of target achieved. Green indicates on-track, yellow at-risk, red behind schedule.">ⓘ</div>
                    </div>
                    <div class="widget-icon">R</div>
                </div>
                <div class="supplier-list">
                    <div class="supplier-item" style="border-left-color: #28a745;">
                        <div style="flex: 1;">
                            <div class="supplier-name">GreenTech Solutions</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Target: -25% | Progress: 18%</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 72%; background: #28a745;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="supplier-item" style="border-left-color: #ffc107;">
                        <div style="flex: 1;">
                            <div class="supplier-name">EcoMaterials Global</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Target: -20% | Progress: 8%</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 40%; background: #ffc107;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="supplier-item" style="border-left-color: #17a085;">
                        <div style="flex: 1;">
                            <div class="supplier-name">Sustainable Resources Co</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Target: -30% | Progress: 22%</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 73%; background: #17a085;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="supplier-item" style="border-left-color: #dc3545;">
                        <div style="flex: 1;">
                            <div class="supplier-name">Nexus Freight Group</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Target: -15% | Progress: 4%</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 27%; background: #dc3545;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="supplier-item" style="border-left-color: #20c997;">
                        <div style="flex: 1;">
                            <div class="supplier-name">Global Trade Alliance</div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">Target: -18% | Progress: 11%</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 61%; background: #20c997;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Popup for Regional Breakdown -->
    <div id="regionalModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2>Regional Supplier Breakdown</h2>
                    <p>Detailed analysis of supplier distribution and performance by region</p>
                </div>
                <button class="close-button" onclick="closeModal()">Close</button>
            </div>
            <div class="modal-body">
                <!-- Regional Cards -->
                <div class="regions-grid">
                    <!-- Asia -->
                    <div class="region-card">
                        <div class="region-header">
                            <h3 class="region-title">Asia</h3>
                            <div class="region-icon">AS</div>
                        </div>
                        <div class="region-stats">
                            <div class="stat-box">
                                <div class="stat-label">Suppliers</div>
                                <div class="stat-value">12</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Avg Score</div>
                                <div class="stat-value">72/100</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Certified</div>
                                <div class="stat-value">58%</div>
                            </div>
                        </div>
                        <div class="country-list">
                            <div class="country-item">
                                <div>
                                    <span class="country-name">China</span>
                                    <span class="risk-badge risk-medium">Medium Risk</span>
                                </div>
                                <span class="country-suppliers">5 suppliers</span>
                            </div>
                            <div class="country-item">
                                <div>
                                    <span class="country-name">India</span>
                                    <span class="risk-badge risk-medium">Medium Risk</span>
                                </div>
                                <span class="country-suppliers">3 suppliers</span>
                            </div>
                            <div class="country-item">
                                <div>
                                    <span class="country-name">Vietnam</span>
                                    <span class="risk-badge risk-low">Low Risk</span>
                                </div>
                                <span class="country-suppliers">2 suppliers</span>
                            </div>
                            <div class="country-item">
                                <div>
                                    <span class="country-name">Japan</span>
                                    <span class="risk-badge risk-low">Low Risk</span>
                                </div>
                                <span class="country-suppliers">2 suppliers</span>
                            </div>
                        </div>
                    </div>

                    <!-- Europe -->
                    <div class="region-card">
                        <div class="region-header">
                            <h3 class="region-title">Europe</h3>
                            <div class="region-icon">EU</div>
                        </div>
                        <div class="region-stats">
                            <div class="stat-box">
                                <div class="stat-label">Suppliers</div>
                                <div class="stat-value">8</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Avg Score</div>
                                <div class="stat-value">84/100</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Certified</div>
                                <div class="stat-value">88%</div>
                            </div>
                        </div>
                        <div class="country-list">
                            <div class="country-item">
                                <div>
                                    <span class="country-name">Germany</span>
                                    <span class="risk-badge risk-low">Low Risk</span>
                                </div>
                                <span class="country-suppliers">3 suppliers</span>
                            </div>
                            <div class="country-item">
                                <div>
                                    <span class="country-name">Netherlands</span>
                                    <span class="risk-badge risk-low">Low Risk</span>
                                </div>
                                <span class="country-suppliers">2 suppliers</span>
                            </div>
                            <div class="country-item">
                                <div>
                                    <span class="country-name">Sweden</span>
                                    <span class="risk-badge risk-low">Low Risk</span>
                                </div>
                                <span class="country-suppliers">2 suppliers</span>
                            </div>
                            <div class="country-item">
                                <div>
                                    <span class="country-name">France</span>
                                    <span class="risk-badge risk-low">Low Risk</span>
                                </div>
                                <span class="country-suppliers">1 supplier</span>
                            </div>
                        </div>
                    </div>

                    <!-- North America -->
                    <div class="region-card">
                        <div class="region-header">
                            <h3 class="region-title">North America</h3>
                            <div class="region-icon">NA</div>
                        </div>
                        <div class="region-stats">
                            <div class="stat-box">
                                <div class="stat-label">Suppliers</div>
                                <div class="stat-value">6</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Avg Score</div>
                                <div class="stat-value">78/100</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Certified</div>
                                <div class="stat-value">67%</div>
                            </div>
                        </div>
                        <div class="country-list">
                            <div class="country-item">
                                <div>
                                    <span class="country-name">United States</span>
                                    <span class="risk-badge risk-low">Low Risk</span>
                                </div>
                                <span class="country-suppliers">4 suppliers</span>
                            </div>
                            <div class="country-item">
                                <div>
                                    <span class="country-name">Canada</span>
                                    <span class="risk-badge risk-low">Low Risk</span>
                                </div>
                                <span class="country-suppliers">2 suppliers</span>
                            </div>
                        </div>
                    </div>

                    <!-- South America -->
                    <div class="region-card">
                        <div class="region-header">
                            <h3 class="region-title">South America</h3>
                            <div class="region-icon">SA</div>
                        </div>
                        <div class="region-stats">
                            <div class="stat-box">
                                <div class="stat-label">Suppliers</div>
                                <div class="stat-value">3</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Avg Score</div>
                                <div class="stat-value">65/100</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Certified</div>
                                <div class="stat-value">33%</div>
                            </div>
                        </div>
                        <div class="country-list">
                            <div class="country-item">
                                <div>
                                    <span class="country-name">Brazil</span>
                                    <span class="risk-badge risk-medium">Medium Risk</span>
                                </div>
                                <span class="country-suppliers">2 suppliers</span>
                            </div>
                            <div class="country-item">
                                <div>
                                    <span class="country-name">Argentina</span>
                                    <span class="risk-badge risk-high">High Risk</span>
                                </div>
                                <span class="country-suppliers">1 supplier</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Comparative Charts -->
                <div class="modal-chart-section">
                    <h3 class="modal-chart-header">Regional Sustainability Score Comparison</h3>
                    <div class="modal-chart-container">
                        <canvas id="regionalScoreChart"></canvas>
                    </div>
                </div>

                <div class="modal-chart-section">
                    <h3 class="modal-chart-header">Regional Emissions Profile</h3>
                    <div class="modal-chart-container">
                        <canvas id="regionalEmissionsChart"></canvas>
                    </div>
                </div>

                <!-- Key Insights -->
                <div class="insights-section">
                    <h3 class="insights-header">Key Regional Insights</h3>
                    
                    <div class="insight-item" style="border-left-color: #28a745;">
                        <div class="insight-icon">+</div>
                        <div class="insight-content">
                            <div class="insight-title">Europe Leading in Sustainability</div>
                            <div class="insight-text">European suppliers maintain the highest average sustainability score (84/100) with 88% certification rate. Strong regulatory framework drives compliance and innovation.</div>
                        </div>
                    </div>

                    <div class="insight-item" style="border-left-color: #ffc107;">
                        <div class="insight-icon">i</div>
                        <div class="insight-content">
                            <div class="insight-title">Asia Requires Additional Support</div>
                            <div class="insight-text">While Asia hosts the largest supplier base (12 suppliers), average scores remain moderate (72/100). Targeted capacity building programs recommended for China and India suppliers.</div>
                        </div>
                    </div>

                    <div class="insight-item" style="border-left-color: #17a085;">
                        <div class="insight-icon">↑</div>
                        <div class="insight-content">
                            <div class="insight-title">North America Shows Steady Progress</div>
                            <div class="insight-text">North American suppliers demonstrate consistent improvement with 67% certification rate. Focus on renewable energy adoption driving emissions reductions.</div>
                        </div>
                    </div>

                    <div class="insight-item" style="border-left-color: #dc3545;">
                        <div class="insight-icon">→</div>
                        <div class="insight-content">
                            <div class="insight-title">South America Needs Immediate Attention</div>
                            <div class="insight-text">Lowest regional performance (65/100 average) with only 33% certified. Argentina supplier flagged as high-risk. Audit and remediation plan required within 60 days.</div>
                        </div>
                    </div>

                    <div class="insight-item" style="border-left-color: #0f5f4e;">
                        <div class="insight-icon">○</div>
                        <div class="insight-content">
                            <div class="insight-title">Geographic Diversification Opportunity</div>
                            <div class="insight-text">Only 1 supplier in Africa presents supply chain risk. Consider strategic partnerships in Kenya, South Africa, or Morocco to improve regional balance and resilience.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Chart 1: Certification Status
        const certCtx = document.getElementById('certificationChart').getContext('2d');
        new Chart(certCtx, {
            type: 'doughnut',
            data: {
                labels: ['ISO 14001 Certified', 'Carbon Neutral', 'No Certification', 'In Progress'],
                datasets: [{
                    data: [12, 6, 8, 4],
                    backgroundColor: ['#0f5f4e', '#17a085', '#e0e0e0', '#ffc107'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { padding: 10, font: { size: 11 } }
                    }
                }
            }
        });

        // Chart 2: Geographic Distribution (INTERACTIVE)
        const geoCtx = document.getElementById('geoChart').getContext('2d');
        new Chart(geoCtx, {
            type: 'bar',
            data: {
                labels: ['Asia', 'Europe', 'North America', 'South America', 'Africa'],
                datasets: [{
                    label: 'Number of Suppliers',
                    data: [12, 8, 6, 3, 1],
                    backgroundColor: '#0f5f4e',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { font: { size: 11 } }
                    },
                    x: {
                        ticks: { font: { size: 11 } }
                    }
                }
            }
        });

        // Modal Functions
        function openModal() {
            document.getElementById('regionalModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // Initialize modal charts after modal is visible
            setTimeout(initializeModalCharts, 100);
        }

        function closeModal() {
            document.getElementById('regionalModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('regionalModal');
            if (event.target == modal) {
                closeModal();
            }
        }

        // Add click handler for geographic chart to open modal
        document.getElementById('geoChartContainer').addEventListener('click', openModal);

        // Initialize modal charts
        let regionalScoreChartInstance = null;
        let regionalEmissionsChartInstance = null;

        function initializeModalCharts() {
            // Regional Score Comparison Chart
            if (regionalScoreChartInstance) {
                regionalScoreChartInstance.destroy();
            }
            const scoreCtx = document.getElementById('regionalScoreChart').getContext('2d');
            regionalScoreChartInstance = new Chart(scoreCtx, {
                type: 'radar',
                data: {
                    labels: ['Sustainability Score', 'Certification Rate', 'Renewable Energy', 'Emissions Reduction', 'Audit Compliance', 'Innovation Index'],
                    datasets: [{
                        label: 'Europe',
                        data: [84, 88, 76, 82, 90, 78],
                        backgroundColor: 'rgba(15, 95, 78, 0.2)',
                        borderColor: '#0f5f4e',
                        borderWidth: 2
                    }, {
                        label: 'North America',
                        data: [78, 67, 68, 72, 75, 70],
                        backgroundColor: 'rgba(23, 160, 133, 0.2)',
                        borderColor: '#17a085',
                        borderWidth: 2
                    }, {
                        label: 'Asia',
                        data: [72, 58, 52, 65, 68, 62],
                        backgroundColor: 'rgba(32, 201, 151, 0.2)',
                        borderColor: '#20c997',
                        borderWidth: 2
                    }, {
                        label: 'South America',
                        data: [65, 33, 45, 58, 55, 48],
                        backgroundColor: 'rgba(255, 193, 7, 0.2)',
                        borderColor: '#ffc107',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: { size: 11 }
                            }
                        }
                    }
                }
            });

            // Regional Emissions Chart
            if (regionalEmissionsChartInstance) {
                regionalEmissionsChartInstance.destroy();
            }
            const emissionsCtx = document.getElementById('regionalEmissionsChart').getContext('2d');
            regionalEmissionsChartInstance = new Chart(emissionsCtx, {
                type: 'bar',
                data: {
                    labels: ['Asia', 'Europe', 'North America', 'South America', 'Africa'],
                    datasets: [{
                        label: 'Total Emissions (t CO2e)',
                        data: [48500, 22400, 18200, 9800, 1200],
                        backgroundColor: '#0f5f4e',
                        borderRadius: 8
                    }, {
                        label: 'Emissions per Supplier',
                        data: [4042, 2800, 3033, 3267, 1200],
                        backgroundColor: '#17a085',
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: { size: 11 }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        // Chart 3: Renewable Energy Usage
        const renewCtx = document.getElementById('renewableChart').getContext('2d');
        new Chart(renewCtx, {
            type: 'bar',
            data: {
                labels: ['GreenTech', 'Sustainable Res', 'Nexus Freight', 'EcoMaterials', 'Global Alliance'],
                datasets: [{
                    label: 'Renewable Energy %',
                    data: [85, 72, 58, 45, 38],
                    backgroundColor: [
                        '#0f5f4e',
                        '#17a085',
                        '#20c997',
                        '#ffc107',
                        '#fd7e14'
                    ],
                    borderRadius: 6
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 100,
                        ticks: { font: { size: 11 } }
                    },
                    y: {
                        ticks: { font: { size: 11 } }
                    }
                }
            }
        });

        // Chart 4: Cost vs Emissions
        const costCtx = document.getElementById('costEmissionsChart').getContext('2d');
        new Chart(costCtx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Suppliers',
                    data: [
                        {x: 12.8, y: 450},
                        {x: 8.5, y: 380},
                        {x: 6.3, y: 320},
                        {x: 4.1, y: 280},
                        {x: 2.9, y: 240}
                    ],
                    backgroundColor: '#0f5f4e',
                    pointRadius: 8,
                    pointHoverRadius: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return 'Emissions: ' + context.parsed.x + ' t | Cost: $' + context.parsed.y + 'k';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Emissions (t CO2e)',
                            font: { size: 11 }
                        },
                        ticks: { font: { size: 10 } }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Annual Cost ($k)',
                            font: { size: 11 }
                        },
                        ticks: { font: { size: 10 } }
                    }
                }
            }
        });
    </script>
</body>
</html>